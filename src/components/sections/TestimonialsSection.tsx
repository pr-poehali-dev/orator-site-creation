import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import Icon from '@/components/ui/icon';
import { useEffect, useRef, useState } from 'react';

const TestimonialsSection = () => {
  const [isVisible, setIsVisible] = useState(false);
  const sectionRef = useRef<HTMLElement>(null);

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
        }
      },
      { threshold: 0.1 }
    );

    if (sectionRef.current) {
      observer.observe(sectionRef.current);
    }

    return () => {
      if (sectionRef.current) {
        observer.unobserve(sectionRef.current);
      }
    };
  }, []);

  const testimonials = [
    {
      name: '–ú–∞—Ä–∏—è –°–∞–≤–∏—Ü–∫–∞—è',
      text: '–ü—Ä–æ—à–ª–∞ –∫—É—Ä—Å –æ—Ä–∞—Ç–æ—Ä—Å–∫–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞ –∏ –∏–º–ø—Ä–æ–≤–∏–∑–∞—Ü–∏–∏ —É –°–≤–µ—Ç–ª–∞–Ω—ã –ö—É–∑–∏–∫–æ–≤–æ–π –ø–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ–¥—Ä—É–≥–∏. –ë–µ–∑—É–º–Ω–æ —Ä–∞–¥–∞, —á—Ç–æ –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç —è —É–∑–Ω–∞–ª–∞ –∏–º–µ–Ω–Ω–æ –æ–± —ç—Ç–æ–π —à–∫–æ–ª–µ! –°–≤–µ—Ç–ª–∞–Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª! –°—Ç—Ä–∞—Ö –∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Å–µ—è–ª–∏—Å—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–Ω—è—Ç–∏—è! –°–≤–µ—Ç–ª–∞–Ω–∞ —Å–æ–∑–¥–∞–µ—Ç –∫–æ–º—Ñ–æ—Ä—Ç–Ω—É—é –∏ —Ç–µ–ø–ª—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –≤ –≥—Ä—É–ø–ø–µ, –ø–µ—Ä–µ–¥–∞–µ—Ç –æ–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞–Ω–∏–π, —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ —Å—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞–µ—à—å –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å –∫–∞–∫ –≤ –æ–±—ã—á–Ω–æ–π –∂–∏–∑–Ω–∏, —Ç–∞–∫ –∏ –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è—Ö. –ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –∫—É—Ä—Å–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ –∑–∞—Å—Ç–∞–≤–ª—è—é—Ç —Å–µ–±—è –∂–¥–∞—Ç—å! –û–¥–Ω–æ–∑–Ω–∞—á–Ω–æ, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é ¬´kuzikova_school¬ª!'
    },
    {
      name: '–ï–ª–µ–Ω–∞ –ê–∫—Å–∞–π—Å–∫–∞—è',
      text: '–≠—Ç–æ –±—ã–ª –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –º–∞—Å—Ç–µ—Ä—Å–∫–∏–π –∫—É—Ä—Å. –ì–¥–µ –∑–∞ –¥–≤–∞ –º–µ—Å—è—Ü–∞ —è —Å–º–æ–≥–ª–∞ –æ—Å–≤–æ–∏—Ç—å –Ω–∞–≤—ã–∫–∏ –æ—Ä–∞—Ç–æ—Ä—Å–∫–æ–≥–æ –∏ –∞–∫—Ç–µ—Ä—Å–∫–æ–≥–æ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞. –ö–æ–Ω–µ—á–Ω–æ, –µ—Å—Ç—å –∫—É–¥–∞ —Ä–∞—Å—Ç–∏. –ù–æ –∑–∞ —ç—Ç–∏ –¥–≤–∞ –º–µ—Å—è—Ü–∞ —è –ø–æ–ª—É—á–∏–ª–∞ —Ç–∞–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞–Ω–∏–π –∏ –Ω–∞–≤—ã–∫–æ–≤, —á—Ç–æ –º–æ–≥—É –≥–æ—Ä–∞–∑–¥–æ —É–≤–µ—Ä–µ–Ω–Ω–µ–µ –≤—ã—Å—Ç—É–ø–∞—Ç—å. –í —ç—Ç–æ–º –∫—É—Ä—Å–µ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –≤—Å–µ: —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –º–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è, –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫—É—Ä—Å–∞. –ö–∞–∂–¥–æ–µ –∑–∞–Ω—è—Ç–∏–µ - —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫ —ç–º–æ—Ü–∏–π. –°–≤–µ—Ç–ª–∞–Ω–∞ - –Ω–∞—Å—Ç–æ—è—â–∏–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª –∏ –∫–∞–∫ –ø–µ–¥–∞–≥–æ–≥, –∏ –∫–∞–∫ –ø—Å–∏—Ö–æ–ª–æ–≥, –∏ –∫–∞–∫ —Ä–µ–∂–∏—Å—Å–µ—Ä. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–∫–∞—á–∞—Ç—å –Ω–∞–≤—ã–∫–∏ –æ—Ä–∞—Ç–æ—Ä–∞ - —Å–º–µ–ª–æ –∏–¥–∏—Ç–µ –≤ Kuzikova School!'
    },
    {
      name: '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –ü—Ä–æ–Ω–∏–Ω–∞',
      text: '–ï—Å–ª–∏ –≤—ã –µ—â—ë —Å–æ–º–Ω–µ–≤–∞–µ—Ç–µ—Å—å –∏ –≤—ã–±–∏—Ä–∞–µ—Ç–µ —à–∫–æ–ª—É –ø–æ –æ—Ä–∞—Ç–æ—Ä—Å–∫–æ–º—É –º–∞—Å—Ç–µ—Ä—Å—Ç–≤—É - –∏–¥–∏—Ç–µ –≤ Kuzikova School! –≠—Ç–æ –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤–æ–≥–æ —Å–µ–±—è. –í–∞—Å –Ω–∞—É—á–∞—Ç –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—é, –∫–∞–∫ –¥–µ—Ä–∂–∞—Ç—å —Ñ–æ–∫—É—Å –≤–Ω–∏–º–∞–Ω–∏—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏, –∫–∞–∫ –æ–≤–ª–∞–¥–µ—Ç—å —Å–æ —Å–≤–æ–∏–º–∏ —ç–º–æ—Ü–∏—è–º–∏, —Å–Ω–∏–º–∞—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏ –≤–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ–º –∏ –º–Ω–æ–≥–æ-–º–Ω–æ–≥–æ –ø–æ–ª–µ–∑–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤–∞—Å –∂–¥—ë—Ç –Ω–∞ –æ–±—É—á–µ–Ω–∏–∏. –Ø –Ω–µ –∂–∞–ª–µ—é –Ω–∏ –æ–¥–Ω–æ–≥–æ –¥–Ω—è –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω–æ–≥–æ –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ!'
    },
    {
      name: '–ö—Å–µ–Ω–∏—è –¢—ã—à–∫–æ',
      text: '–ü—Ä–æ—à–ª–∞ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–π –∫—É—Ä—Å –°–≤–µ—Ç–ª–∞–Ω—ã ¬´–°–≤–æ—è –∏–≥—Ä–∞¬ª. –ü–æ–¥–∞—á–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –Ω–∞ –≤—ã—Å—à–µ–º —É—Ä–æ–≤–Ω–µ, —É–¥–æ–±–Ω–∞—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è —Å—Ç—É–¥–∏—è –∏ –≥—Ä–∞—Ñ–∏–∫ —É—á—ë–±—ã. –ë—ã–ª–æ –æ—á–µ–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –∏ –ø–æ–∑–Ω–∞–≤–∞—Ç–µ–ª—å–Ω–æ. –ö –∫–æ–Ω—Ü—É –∫—É—Ä—Å–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ç—ã —Å—Ç–∞–Ω–æ–≤–∏—à—å—Å—è –¥—Ä—É–≥–∏–º —á–µ–ª–æ–≤–µ–∫–æ–º: —Å–∞–º–æ—É–≤–µ—Ä–µ–Ω–Ω—ã–º, –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–º –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ (–≥–æ–≤–æ—Ä—é –∑–∞ —Å–µ–±—èüôÉ). –û–∂–∏–¥–∞–Ω–∏—è –æ–ø—Ä–∞–≤–¥–∞–Ω—ã)) –¢–∞–∫–∂–µ –±—ã–ª–æ –∫–ª–∞—Å—Å–Ω–æ –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å –æ—Ä–∞—Ç–æ—Ä—Å–∫–∏–µ –∏ –∞–∫—Ç–µ—Ä—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –≤ –≥—Ä—É–ø–ø–µ —Å –¥—Ä—É–≥–∏–º–∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–º–∏ –ª—é–¥—å–º–∏, –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ –∏, –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –æ–ø—ã—Ç‚úåÔ∏è –û–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é —ç—Ç—É —Å—Ç—É–¥–∏—éüî•'
    },
    {
      name: '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –®–æ—Å—Ç–∞–∫',
      text: '–Ø –ø—Ä–æ—à–ª–∞ –æ–±—É—á–µ–Ω–∏–µ –ø–æ –æ—Ä–∞—Ç–æ—Ä—Å–∫–æ–º—É –∏—Å–∫—É—Å—Å—Ç–≤—É –∏ –∏–º–ø—Ä–æ–≤–∏–∑–∞—Ü–∏–∏ ¬´–°–≤–æ—è –∏–≥—Ä–∞¬ª —É –°–≤–µ—Ç–ª–∞–Ω—ã –ö—É–∑–∏–∫–æ–≤–æ–π. –≠—Ç–æ—Ç –∫—É—Ä—Å –±—ã–ª –Ω–∞—Å—Ç–æ—è—â–∏–º –ø—Ä–æ—Ä—ã–≤–æ–º –≤ —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–∏ –∏ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ –æ—Ä–∞—Ç–æ—Ä—Å–∫–∏—Ö –Ω–∞–≤—ã–∫–æ–≤. –ö–∞–∂–¥–æ–µ –∑–∞–Ω—è—Ç–∏–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ, –ø–æ–ª–µ–∑–Ω–æ, –∞ —É—Ö–æ–¥–∏–ª–∞ —è –≤—Å–µ–≥–¥–∞ —Å –Ω–æ–≤—ã–º–∏ –∏–Ω—Å–∞–π—Ç–∞–º–∏. –ë–ª–∞–≥–æ–¥–∞—Ä—è –æ–±—É—á–µ–Ω–∏—é —É –°–≤–µ—Ç–ª–∞–Ω—ã, —è –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ–ª—É—á–∏–ª–∞ –Ω–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ –≤ –æ–±–ª–∞—Å—Ç–∏ –æ—Ä–∞—Ç–æ—Ä—Å–∫–æ–≥–æ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞, –Ω–æ –∏ –æ–±—Ä–µ–ª–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Å–µ–±–µ –Ω–∞ –ø—É–±–ª–∏–∫–µ. –í—Å–µ —Ü–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —è —Å—Ç–∞–≤–∏–ª–∞ –≤ –Ω–∞—á–∞–ª–µ –∫—É—Ä—Å–∞ –±—ã–ª–∏ –º–Ω–æ–π –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã –ø–æ –µ–≥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—é. –¢–µ–ø–µ—Ä—å —è –≥–æ—Ç–æ–≤–∞ –∫ –Ω–æ–≤—ã–º –≤—ã–∑–æ–≤–∞–º –∏ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è–º –ø–µ—Ä–µ–¥ –ª—é–¥—å–º–∏ —Å –ª–µ–≥–∫–æ—Å—Ç—å—é –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é.'
    },
    {
      name: '–û–ª—å–≥–∞ –ë–µ–ª—è–µ–≤–∞',
      text: '–Ø –ø—Ä–æ—à–ª–∞ –æ—Ä–∞—Ç–æ—Ä—Å–∫–∏–π –∫—É—Ä—Å "–°–≤–æ—è –∏–≥—Ä–∞" –∏ —ç—Ç–æ –æ–¥–Ω–∞ –∏–∑ –ª—É—á—à–∏—Ö –º–æ–∏—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –≤ —Å–µ–±—è –≤ 2023 –≥–æ–¥—É. 2 –º–µ—Å—è—Ü–∞ –º–æ—â–Ω–æ–π –ø—Ä–æ–∫–∞—á–∫–∏, –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –≤ –∫–æ–º–∞–Ω–¥–µ, –Ω–∞—Å—Ç–æ—è—â–∏–π –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –∫–∞–∂–¥–æ–º—É, –æ–±—â–µ–Ω–∏–µ –≤ –∫—Ä—É–≥—É –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É—é, –¥–∞–∂–µ –Ω–µ —Ä–∞–∑–¥—É–º—ã–≤–∞–π—Ç–µ, —ç—Ç–æ –ª—É—á—à–µ–µ, —á—Ç–æ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∏ –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å –∫—É—Ä—Å–∞–º–∏ –æ–Ω–ª–∞–π–Ω. –ñ–∏–≤–æ–µ –æ–±—â–µ–Ω–∏–µ, –Ω–∞–ª–µ—Ç –æ—Ä–∞—Ç–æ—Ä—Å–∫–∏—Ö —á–∞—Å–æ–≤ –∏ —Ç–æ–Ω–∫–∞—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ - —ç—Ç–æ —Ç–æ, —á—Ç–æ –¥–∞–µ—Ç –°–≤–µ—Ç–ª–∞–Ω–∞ –Ω–∞ –∫—É—Ä—Å–µ. –¢–µ–æ—Ä–∏—è –ø—Ä–µ–ø–æ–¥–Ω–æ—Å–∏—Ç—Å—è –ª–µ–≥–∫–æ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –ó–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å!))'
    }
  ];

  return (
    <section ref={sectionRef} id="testimonials" className="py-10 md:py-14 px-3 md:px-4 bg-gradient-to-br from-primary/5 via-white to-secondary/5">
      <div className="container mx-auto max-w-6xl">
        <div className={`transition-all duration-1000 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}>
          <h2 className="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-3 md:mb-4">–û—Ç–∑—ã–≤—ã –≤—ã–ø—É—Å–∫–Ω–∏–∫–æ–≤</h2>
          <p className="text-center text-muted-foreground mb-8 md:mb-12 text-sm md:text-base lg:text-lg max-w-2xl mx-auto px-4">
            –ë–æ–ª–µ–µ 500 —á–µ–ª–æ–≤–µ–∫ —É–∂–µ –ø—Ä–æ—à–ª–∏ –∫—É—Ä—Å –∏ –∏–∑–º–µ–Ω–∏–ª–∏ —Å–≤–æ—é –∂–∏–∑–Ω—å
          </p>
        </div>
        
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
          {testimonials.map((testimonial, index) => (
            <Card 
              key={index} 
              className={`group hover:shadow-xl transition-all duration-500 hover:-translate-y-2 hover:scale-[1.02] ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}
              style={{ transitionDelay: `${index * 100}ms` }}
            >
              <CardHeader className="pb-2 md:pb-3">
                <div className="flex items-start justify-between mb-2 md:mb-3">
                  <div className="w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
                    <Icon name="User" size={20} className="text-white md:w-6 md:h-6" />
                  </div>
                  <div className="flex gap-1">
                    {[...Array(5)].map((_, i) => (
                      <Icon key={i} name="Star" size={16} className="text-yellow-500 fill-yellow-500" />
                    ))}
                  </div>
                </div>
                <CardTitle className="text-base md:text-lg">{testimonial.name}</CardTitle>
              </CardHeader>
              <CardContent className="pt-0">
                <p className="text-sm md:text-base text-muted-foreground leading-relaxed">{testimonial.text}</p>
              </CardContent>
            </Card>
          ))}
        </div>

        <div className={`mt-12 text-center space-y-6 transition-all duration-1000 delay-700 ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10'}`}>
          <div className="inline-block bg-gradient-to-r from-primary/10 to-secondary/10 rounded-2xl p-8">
            <p className="text-2xl font-bold mb-2">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</p>
            <p className="text-lg">
              <span className="font-bold text-primary">4.9/5</span> ‚Äî —Å—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ –∫—É—Ä—Å–∞
            </p>
            <p className="text-muted-foreground mt-2">–ø–æ –æ—Ç–∑—ã–≤–∞–º –≤—ã–ø—É—Å–∫–Ω–∏–∫–æ–≤</p>
          </div>
          
          <div>
            <Button 
              asChild
              size="lg"
              className="bg-gradient-to-r from-primary to-secondary hover:opacity-90"
            >
              <a 
                href="https://yandex.ru/profile/108893235678?intent=reviews" 
                target="_blank" 
                rel="noopener noreferrer"
                className="inline-flex items-center gap-2"
              >
                –í—Å–µ –æ—Ç–∑—ã–≤—ã –Ω–∞ –Ø–Ω–¥–µ–∫—Å
                <Icon name="ExternalLink" size={18} />
              </a>
            </Button>
          </div>
        </div>
      </div>
    </section>
  );
};

export default TestimonialsSection;